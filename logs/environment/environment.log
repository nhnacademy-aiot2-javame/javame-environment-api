2025-05-26 21:00:06 [SpringApplicationShutdownHook] INFO  org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry - Unregistering application ENVIRONMENT-API with eureka with status DOWN
2025-05-26 21:00:06 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1748260806219, current=DOWN, previous=UP]
2025-05-26 21:00:06 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273: registering service...
2025-05-26 21:00:06 [SpringApplicationShutdownHook] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-26 21:00:06 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-26 21:00:06 [SpringApplicationShutdownHook] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-26 21:00:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-26 21:00:06 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273 - registration status: 204
2025-05-26 21:00:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-26 21:00:06 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - Shutting down DiscoveryClient ...
2025-05-26 21:00:09 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - Unregistering ...
2025-05-26 21:00:09 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273 - deregister  status: 200
2025-05-26 21:00:09 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - Completed shut down of DiscoveryClient
2025-05-26 21:00:17 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-05-26 21:00:17 [main] INFO  com.nhnacademy.environment.JavameEnvironmentApiApplication - Starting JavameEnvironmentApiApplication using Java 21.0.6 with PID 55860 (/Users/seongjangwon/IdeaProjects/javame-environment-api/target/classes started by seongjangwon in /Users/seongjangwon/IdeaProjects/javame-environment-api)
2025-05-26 21:00:17 [main] DEBUG com.nhnacademy.environment.JavameEnvironmentApiApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-26 21:00:17 [main] INFO  com.nhnacademy.environment.JavameEnvironmentApiApplication - The following 1 profile is active: "local"
2025-05-26 21:00:17 [main] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-26 21:00:18 [main] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 201 ms. Found 1 JPA repository interface.
2025-05-26 21:00:18 [main] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=b7c72bdb-2c8f-3131-a0e1-53c80bbdf986
2025-05-26 21:00:19 [main] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 10273 (http)
2025-05-26 21:00:19 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10273"]
2025-05-26 21:00:19 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-26 21:00:19 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-26 21:00:19 [main] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-26 21:00:19 [main] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1893 ms
2025-05-26 21:00:19 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.FilterConfig.traceIdFilter()
2025-05-26 21:00:19 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.FilterConfig.traceIdFilter() => 5ms
2025-05-26 21:00:19 [main] DEBUG com.nhnacademy.environment.config.TraceIdFilter - Filter 'traceIdFilter' configured for use
2025-05-26 21:00:19 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-26 21:00:19 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6604f246
2025-05-26 21:00:19 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-26 21:00:19 [main] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-26 21:00:19 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-26 21:00:19 [main] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-26 21:00:20 [main] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-26 21:00:20 [main] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.41
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-26 21:00:20 [main] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-26 21:00:20 [main] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.InfluxDBConfig.influxDBClient()
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - [InfluxDB 연결 정보]
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - ▶ URL    : https://influxdb.javame.live
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - ▶ Token  : g-W7W0j9AE4coriQfnhHGMDnDhTZGok8bgY1NnZ6Z0EnTOsFY3SWAqDTC5fYlQ9mYnbK_doR074-a4Dgck2AOQ==
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - ▶ Org    : javame
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - ▶ Bucket : data
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.InfluxDBConfig.influxDBClient() => 111ms
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.InfluxDBConfig.queryApi()
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.InfluxDBConfig.queryApi() => 7ms
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.InfluxDBConfig.influxBucket()
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.InfluxDBConfig.influxBucket() => 0ms
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.InfluxDBConfig.influxOrganization()
2025-05-26 21:00:21 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.InfluxDBConfig.influxOrganization() => 0ms
2025-05-26 21:00:21 [main] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-26 21:00:23 [main] INFO  org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-05-26 21:00:23 [main] WARN  org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-26 21:00:23 [main] INFO  org.springframework.cloud.netflix.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Application is null : false
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - The response status is 200
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1748260823715 with initial instances count: 2
2025-05-26 21:00:23 [main] INFO  org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry - Registering application ENVIRONMENT-API with eureka with status UP
2025-05-26 21:00:23 [main] INFO  com.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1748260823736, current=UP, previous=STARTING]
2025-05-26 21:00:23 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273: registering service...
2025-05-26 21:00:23 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10273"]
2025-05-26 21:00:23 [main] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 10273 (http) with context path '/'
2025-05-26 21:00:23 [main] INFO  org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration - Updating port to 10273
2025-05-26 21:00:23 [main] INFO  com.nhnacademy.environment.JavameEnvironmentApiApplication - Started JavameEnvironmentApiApplication in 6.946 seconds (process running for 9.268)
2025-05-26 21:00:23 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273 - registration status: 204
2025-05-26 21:00:54 [http-nio-10273-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-26 21:00:54 [http-nio-10273-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-26 21:00:54 [http-nio-10273-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 13 ms
2025-05-26 21:00:54 [http-nio-10273-exec-1] DEBUG com.nhnacademy.environment.config.TraceIdFilter - TraceId [f4cb1006] created for request: /environment/reports/generate
2025-05-26 21:00:54 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.controller.ReportController.generateReport()
2025-05-26 21:00:54 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.service.ReportService.generateReport()
2025-05-26 21:00:54 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - 리포트 생성 요청 수신: userPrompt='저번주 평균을 알려줘', reportType='종합'
2025-05-26 21:00:54 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - 데이터 조회 시작 - Origins: [server_data], Measurements: [temp_input]
2025-05-26 21:00:54 [http-nio-10273-exec-1] DEBUG com.nhnacademy.environment.report.service.ReportService - Origin: server_data, Measurement: temp_input 데이터 조회 중...
2025-05-26 21:00:54 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData()
2025-05-26 21:00:54 [http-nio-10273-exec-1] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [RawDataForPeriod] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["origin"] == "server_data") |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> keep(columns: ["_time", "_field", "_value", "_measurement", "origin", "location", "deviceId", "gatewayId"]) |> sort(columns: ["_time"])
2025-05-26 21:00:59 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData() => 4998ms
2025-05-26 21:00:59 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod()
2025-05-26 21:00:59 [http-nio-10273-exec-1] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [AggregatedChartData] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> aggregateWindow(every: 1h, fn: mean, createEmpty: false) |> sort(columns: ["_time"])
2025-05-26 21:01:00 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod() => 271ms
2025-05-26 21:01:00 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - 데이터 조회 완료. 테이블 항목 수: 21297, 차트 수: 1
2025-05-26 21:01:00 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 호출 시작...
2025-05-26 21:01:00 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.client.GeminiClient.generateSummary()
2025-05-26 21:01:06 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.client.GeminiClient.generateSummary() => 6918ms
2025-05-26 21:01:07 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 요약 수신 완료.
2025-05-26 21:01:07 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.service.ReportService.generateReport() => 12261ms
2025-05-26 21:01:07 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.controller.ReportController.generateReport() => 12263ms
2025-05-26 21:05:23 [AsyncResolver-bootstrap-executor-%d] INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-05-26 21:10:23 [AsyncResolver-bootstrap-executor-%d] INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-05-26 21:11:40 [http-nio-10273-exec-3] DEBUG com.nhnacademy.environment.config.TraceIdFilter - TraceId [7bf07ad2] created for request: /environment/reports/generate
2025-05-26 21:11:40 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.controller.ReportController.generateReport()
2025-05-26 21:11:40 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.service.ReportService.generateReport()
2025-05-26 21:11:40 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - 리포트 생성 요청 수신: userPrompt='지난 주 평균을 알려줄래?', reportType='종합'
2025-05-26 21:11:40 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - 데이터 조회 시작 - Origins: [server_data], Measurements: [temp_input]
2025-05-26 21:11:40 [http-nio-10273-exec-3] DEBUG com.nhnacademy.environment.report.service.ReportService - Origin: server_data, Measurement: temp_input 데이터 조회 중...
2025-05-26 21:11:40 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData()
2025-05-26 21:11:40 [http-nio-10273-exec-3] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [RawDataForPeriod] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["origin"] == "server_data") |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> keep(columns: ["_time", "_field", "_value", "_measurement", "origin", "location", "deviceId", "gatewayId"]) |> sort(columns: ["_time"])
2025-05-26 21:11:41 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData() => 1412ms
2025-05-26 21:11:41 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod()
2025-05-26 21:11:41 [http-nio-10273-exec-3] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [AggregatedChartData] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> aggregateWindow(every: 1h, fn: mean, createEmpty: false) |> sort(columns: ["_time"])
2025-05-26 21:11:42 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod() => 266ms
2025-05-26 21:11:42 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - 데이터 조회 완료. 테이블 항목 수: 21297, 차트 수: 1
2025-05-26 21:11:42 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 호출 시작...
2025-05-26 21:11:42 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.client.GeminiClient.generateSummary()
2025-05-26 21:11:48 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.client.GeminiClient.generateSummary() => 6572ms
2025-05-26 21:11:48 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 요약 수신 완료.
2025-05-26 21:11:48 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.service.ReportService.generateReport() => 8304ms
2025-05-26 21:11:48 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.controller.ReportController.generateReport() => 8306ms
2025-05-26 21:15:23 [AsyncResolver-bootstrap-executor-%d] INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-05-26 21:18:22 [SpringApplicationShutdownHook] INFO  org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry - Unregistering application ENVIRONMENT-API with eureka with status DOWN
2025-05-26 21:18:22 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1748261902055, current=DOWN, previous=UP]
2025-05-26 21:18:22 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273: registering service...
2025-05-26 21:18:22 [SpringApplicationShutdownHook] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-26 21:18:22 [tomcat-shutdown] INFO  org.springframework.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-26 21:18:22 [SpringApplicationShutdownHook] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-26 21:18:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-26 21:18:22 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273 - registration status: 204
2025-05-26 21:18:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-26 21:18:22 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - Shutting down DiscoveryClient ...
2025-05-26 21:18:25 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - Unregistering ...
2025-05-26 21:18:25 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273 - deregister  status: 200
2025-05-26 21:18:25 [SpringApplicationShutdownHook] INFO  com.netflix.discovery.DiscoveryClient - Completed shut down of DiscoveryClient
2025-05-26 21:18:32 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-05-26 21:18:32 [main] INFO  com.nhnacademy.environment.JavameEnvironmentApiApplication - Starting JavameEnvironmentApiApplication using Java 21.0.6 with PID 57242 (/Users/seongjangwon/IdeaProjects/javame-environment-api/target/classes started by seongjangwon in /Users/seongjangwon/IdeaProjects/javame-environment-api)
2025-05-26 21:18:32 [main] DEBUG com.nhnacademy.environment.JavameEnvironmentApiApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-26 21:18:32 [main] INFO  com.nhnacademy.environment.JavameEnvironmentApiApplication - The following 1 profile is active: "local"
2025-05-26 21:18:33 [main] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-26 21:18:33 [main] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 292 ms. Found 1 JPA repository interface.
2025-05-26 21:18:35 [main] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=b7c72bdb-2c8f-3131-a0e1-53c80bbdf986
2025-05-26 21:18:36 [main] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 10273 (http)
2025-05-26 21:18:36 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-10273"]
2025-05-26 21:18:36 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-05-26 21:18:36 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-26 21:18:36 [main] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-26 21:18:36 [main] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4294 ms
2025-05-26 21:18:36 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.FilterConfig.traceIdFilter()
2025-05-26 21:18:36 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.FilterConfig.traceIdFilter() => 1ms
2025-05-26 21:18:37 [main] DEBUG com.nhnacademy.environment.config.TraceIdFilter - Filter 'traceIdFilter' configured for use
2025-05-26 21:18:37 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-26 21:18:38 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5401c6a8
2025-05-26 21:18:38 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-26 21:18:38 [main] INFO  org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-26 21:18:38 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-26 21:18:38 [main] INFO  org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-26 21:18:38 [main] INFO  org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-26 21:18:39 [main] INFO  org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.41
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-26 21:18:40 [main] INFO  org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-26 21:18:40 [main] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.InfluxDBConfig.influxDBClient()
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - [InfluxDB 연결 정보]
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - ▶ URL    : https://influxdb.javame.live
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - ▶ Token  : g-W7W0j9AE4coriQfnhHGMDnDhTZGok8bgY1NnZ6Z0EnTOsFY3SWAqDTC5fYlQ9mYnbK_doR074-a4Dgck2AOQ==
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - ▶ Org    : javame
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.InfluxDBConfig - ▶ Bucket : data
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.InfluxDBConfig.influxDBClient() => 130ms
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.InfluxDBConfig.queryApi()
2025-05-26 21:18:40 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.InfluxDBConfig.queryApi() => 10ms
2025-05-26 21:18:41 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.InfluxDBConfig.influxBucket()
2025-05-26 21:18:41 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.InfluxDBConfig.influxBucket() => 7ms
2025-05-26 21:18:41 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.config.InfluxDBConfig.influxOrganization()
2025-05-26 21:18:41 [main] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.config.InfluxDBConfig.influxOrganization() => 35ms
2025-05-26 21:18:44 [main] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-26 21:18:51 [main] INFO  org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2025-05-26 21:18:51 [main] WARN  org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-05-26 21:18:51 [main] INFO  org.springframework.cloud.netflix.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.DiscoveryClient - Initializing Eureka in region us-east-1
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.DiscoveryClient - Disable delta property : false
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.DiscoveryClient - Single vip registry refresh property : null
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.DiscoveryClient - Force full registry fetch : false
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.DiscoveryClient - Application is null : false
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.DiscoveryClient - Registered Applications size is zero : true
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.DiscoveryClient - Application version is -1: true
2025-05-26 21:18:51 [main] INFO  com.netflix.discovery.DiscoveryClient - Getting all instance registry info from the eureka server
2025-05-26 21:18:53 [main] INFO  com.netflix.discovery.DiscoveryClient - The response status is 200
2025-05-26 21:18:53 [main] INFO  com.netflix.discovery.DiscoveryClient - Starting heartbeat executor: renew interval is: 30
2025-05-26 21:18:53 [main] INFO  com.netflix.discovery.InstanceInfoReplicator - InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-05-26 21:18:53 [main] INFO  com.netflix.discovery.DiscoveryClient - Discovery Client initialized at timestamp 1748261933286 with initial instances count: 1
2025-05-26 21:18:53 [main] INFO  org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry - Registering application ENVIRONMENT-API with eureka with status UP
2025-05-26 21:18:53 [main] INFO  com.netflix.discovery.DiscoveryClient - Saw local status change event StatusChangeEvent [timestamp=1748261933320, current=UP, previous=STARTING]
2025-05-26 21:18:53 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273: registering service...
2025-05-26 21:18:53 [main] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-10273"]
2025-05-26 21:18:53 [main] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 10273 (http) with context path '/'
2025-05-26 21:18:53 [main] INFO  org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration - Updating port to 10273
2025-05-26 21:18:53 [main] INFO  com.nhnacademy.environment.JavameEnvironmentApiApplication - Started JavameEnvironmentApiApplication in 21.619 seconds (process running for 24.02)
2025-05-26 21:18:53 [DiscoveryClient-InstanceInfoReplicator-%d] INFO  com.netflix.discovery.DiscoveryClient - DiscoveryClient_ENVIRONMENT-API/192.168.71.48:ENVIRONMENT-API:10273 - registration status: 204
2025-05-26 21:19:39 [http-nio-10273-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-26 21:19:39 [http-nio-10273-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-26 21:19:39 [http-nio-10273-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 12 ms
2025-05-26 21:19:39 [http-nio-10273-exec-1] DEBUG com.nhnacademy.environment.config.TraceIdFilter - TraceId [ff85b684] created for request: /environment/reports/generate
2025-05-26 21:19:39 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.controller.ReportController.generateReport()
2025-05-26 21:19:39 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.service.ReportService.generateReport()
2025-05-26 21:19:39 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - 리포트 생성 요청 수신: userPrompt='지난주 평균을 알려줄래? 그리고 리포트에 요약해서 잘적어주면돼 그리고 유의사항도 알려주면 좋고', reportType='종합'
2025-05-26 21:19:39 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - 데이터 조회 시작 - Origins: [server_data], Measurements: [temp_input]
2025-05-26 21:19:39 [http-nio-10273-exec-1] DEBUG com.nhnacademy.environment.report.service.ReportService - Origin: server_data, Measurement: temp_input 데이터 조회 중...
2025-05-26 21:19:39 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData()
2025-05-26 21:19:39 [http-nio-10273-exec-1] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [RawDataForPeriod] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["origin"] == "server_data") |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> keep(columns: ["_time", "_field", "_value", "_measurement", "origin", "location", "deviceId", "gatewayId"]) |> sort(columns: ["_time"])
2025-05-26 21:19:40 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData() => 1475ms
2025-05-26 21:19:40 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod()
2025-05-26 21:19:40 [http-nio-10273-exec-1] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [AggregatedChartData] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> aggregateWindow(every: 1h, fn: mean, createEmpty: false) |> sort(columns: ["_time"])
2025-05-26 21:19:41 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod() => 287ms
2025-05-26 21:19:41 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 호출 시작...
2025-05-26 21:19:41 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.client.GeminiClient.generateSummary()
2025-05-26 21:19:47 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.client.GeminiClient.generateSummary() => 6786ms
2025-05-26 21:19:47 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 요약 수신 완료.
2025-05-26 21:19:47 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.service.ReportService.generateReport() => 8552ms
2025-05-26 21:19:47 [http-nio-10273-exec-1] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.controller.ReportController.generateReport() => 8554ms
2025-05-26 21:21:26 [http-nio-10273-exec-3] DEBUG com.nhnacademy.environment.config.TraceIdFilter - TraceId [83fb8de1] created for request: /environment/reports/generate
2025-05-26 21:21:26 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.controller.ReportController.generateReport()
2025-05-26 21:21:26 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.service.ReportService.generateReport()
2025-05-26 21:21:26 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - 리포트 생성 요청 수신: userPrompt='그러면 이틀전 하루전의 차이를 알려줄래? 차이를 보고서로 알려주면됨', reportType='종합'
2025-05-26 21:21:26 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - 데이터 조회 시작 - Origins: [server_data], Measurements: [temp_input]
2025-05-26 21:21:26 [http-nio-10273-exec-3] DEBUG com.nhnacademy.environment.report.service.ReportService - Origin: server_data, Measurement: temp_input 데이터 조회 중...
2025-05-26 21:21:26 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData()
2025-05-26 21:21:26 [http-nio-10273-exec-3] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [RawDataForPeriod] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["origin"] == "server_data") |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> keep(columns: ["_time", "_field", "_value", "_measurement", "origin", "location", "deviceId", "gatewayId"]) |> sort(columns: ["_time"])
2025-05-26 21:21:27 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData() => 1071ms
2025-05-26 21:21:27 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod()
2025-05-26 21:21:27 [http-nio-10273-exec-3] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [AggregatedChartData] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> aggregateWindow(every: 1h, fn: mean, createEmpty: false) |> sort(columns: ["_time"])
2025-05-26 21:21:28 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod() => 306ms
2025-05-26 21:21:28 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 호출 시작...
2025-05-26 21:21:28 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.client.GeminiClient.generateSummary()
2025-05-26 21:21:35 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.client.GeminiClient.generateSummary() => 7238ms
2025-05-26 21:21:35 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 요약 수신 완료.
2025-05-26 21:21:35 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.service.ReportService.generateReport() => 8620ms
2025-05-26 21:21:35 [http-nio-10273-exec-3] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.controller.ReportController.generateReport() => 8622ms
2025-05-26 21:23:51 [AsyncResolver-bootstrap-executor-%d] INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
2025-05-26 21:24:56 [http-nio-10273-exec-5] DEBUG com.nhnacademy.environment.config.TraceIdFilter - TraceId [171c75f5] created for request: /environment/reports/generate
2025-05-26 21:24:56 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.controller.ReportController.generateReport()
2025-05-26 21:24:56 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.service.ReportService.generateReport()
2025-05-26 21:24:56 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.report.service.ReportService - 리포트 생성 요청 수신: userPrompt='그러면 너가 보고 데이터 받는거중에 분석할것이 있는지 확인해줄래 계산도 좀 해주면 좋겠는데', reportType='종합'
2025-05-26 21:24:56 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.report.service.ReportService - 데이터 조회 시작 - Origins: [server_data], Measurements: [temp_input]
2025-05-26 21:24:56 [http-nio-10273-exec-5] DEBUG com.nhnacademy.environment.report.service.ReportService - Origin: server_data, Measurement: temp_input 데이터 조회 중...
2025-05-26 21:24:56 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData()
2025-05-26 21:24:56 [http-nio-10273-exec-5] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [RawDataForPeriod] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["origin"] == "server_data") |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> keep(columns: ["_time", "_field", "_value", "_measurement", "origin", "location", "deviceId", "gatewayId"]) |> sort(columns: ["_time"])
2025-05-26 21:24:58 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getRawTimeSeriesData() => 2287ms
2025-05-26 21:24:58 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod()
2025-05-26 21:24:58 [http-nio-10273-exec-5] DEBUG com.nhnacademy.environment.timeseries.service.TimeSeriesDataService - [AggregatedChartData] Flux query = from(bucket: "data") |> range(start: time(v: "2025-05-18T15:00:00Z"), stop: time(v: "2025-05-26T14:59:59.999999999Z")) |> filter(fn: (r) => r["_measurement"] == "temp_input") |> filter(fn: (r) => r["_field"] == "value") |> filter(fn: (r) => r["location"] == "server_resource_data") |> filter(fn: (r) => r["deviceId"] == "192.168.71.74") |> filter(fn: (r) => r["gatewayId"] == "sensors") |> aggregateWindow(every: 1h, fn: mean, createEmpty: false) |> sort(columns: ["_time"])
2025-05-26 21:24:58 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.timeseries.service.TimeSeriesDataService.getAggregatedChartDataForPeriod() => 406ms
2025-05-26 21:24:58 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 호출 시작...
2025-05-26 21:24:58 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [ENTER] com.nhnacademy.environment.report.client.GeminiClient.generateSummary()
2025-05-26 21:25:04 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.client.GeminiClient.generateSummary() => 5554ms
2025-05-26 21:25:04 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.report.service.ReportService - Gemini API 요약 수신 완료.
2025-05-26 21:25:04 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.service.ReportService.generateReport() => 8260ms
2025-05-26 21:25:04 [http-nio-10273-exec-5] INFO  com.nhnacademy.environment.config.TraceAspect - [EXIT] com.nhnacademy.environment.report.controller.ReportController.generateReport() => 8262ms
2025-05-26 21:28:51 [AsyncResolver-bootstrap-executor-%d] INFO  com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver - Resolving eureka endpoints via configuration
